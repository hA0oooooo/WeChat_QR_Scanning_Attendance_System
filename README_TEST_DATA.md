# 测试数据说明文档


### 初始化测试数据

```bash
# 在项目根目录运行
python init_test_data.py

# 初始化完成后，启动Django服务器
python manage.py runserver

# 在浏览器中访问
http://127.0.0.1:8000/
```

**特性说明：**
- 每次运行都会完全清除所有现有数据（包括用户账号）
- 所有账号密码统一设置为 `1`，便于测试
- 一键重置整个测试环境，确保数据一致性


### 登录账号

初始化完成后，可以使用以下账号登录系统：

| 角色 | 用户名 | 密码 | 说明 |
|------|--------|------|------|
| 管理员 | `admin` | `1` | 系统管理员，可管理所有数据 |
| 教师 | `12345` | `1` | 郑老师，工号12345 |
| 学生 | `23307130001` | `1` | 开心，学号23307130001 |



### 组织架构
- **院系**：大数据学院
- **专业**：数据科学与大数据技术

### 课程信息
- **课程代码**：DB2024
- **课程名称**：数据库及实现
- **学分**：3学分
- **上课时间**：星期三第3-5节（9:55-12:30）
- **上课地点**：HGX508
- **扫码有效时间**：9:55-12:30（与课程时间一致）

### 人员信息

##### 教师
- **姓名**：郑老师
- **工号**：12345
- **所属院系**：大数据学院
- **登录账号**：12345 / 1

##### 学生（10名）
| 学号 | 姓名 | 性别 | 登录账号 | 扫码时间 | 考勤状态 | 备注 |
|------|------|------|----------|----------|----------|------|
| 23307130001 | 开心 | 男 | 23307130001 / 1 | 无 | 请假 | 有请假申请 |
| 23307130002 | 青春 | 女 | 无账号 | 无 | 请假 | 有请假申请 |
| 23307130003 | 阳光 | 男 | 无账号 | 10:00 | 出勤 | 正常出勤 |
| 23307130004 | 梦想 | 女 | 无账号 | 9:55 | 出勤 | 准时出勤 |
| 23307130005 | 希望 | 男 | 无账号 | 11:30 | 出勤 | 课程中间扫码 |
| 23307130006 | 未来 | 女 | 无账号 | 12:25 | 出勤 | 快下课时扫码 |
| 23307130007 | 快乐 | 男 | 无账号 | 9:30 | 缺勤 | 早到但无效扫码 |
| 23307130008 | 自由 | 女 | 无账号 | 13:00 | 缺勤 | 迟到无效扫码 |
| 23307130009 | 勇敢 | 男 | 无账号 | 无 | 缺勤 | 未扫码缺勤 |
| 23307130010 | 智慧 | 女 | 无账号 | 10:45 | 出勤 | 正常出勤 |

**说明**：
- 只有第一个学生（开心）有登录账号，其他学生通过微信扫码考勤
- 扫码时间显式设计，涵盖各种考勤场景
- 有效扫码时间：9:55-12:30

### 考勤数据

##### 考勤事件
系统会自动创建2个考勤事件（基于星期三的课程安排）：
1. **2025-06-11**：9:55-12:30（一周前，已完成考勤）
2. **2025-06-25**：9:55-12:30（下周，未来事件）

**说明**：
- 每个考勤事件代表一个二维码
- 扫码有效时间与课程时间一致：9:55-12:30
- 所有事件都安排在星期三，符合课程表

##### 考勤记录
为过去的考勤事件（2025-06-11）创建考勤记录，包含三种状态：
- **出勤**：在9:55-12:30有效时间范围内扫码的学生
- **缺勤**：没有扫码或扫码时间不在有效区间内，且没有请假的学生
- **请假**：有已批准请假申请的学生

扫码时间设计（显式定义）：
- **正常出勤**：阳光(10:00)、梦想(9:55)、希望(11:30)、未来(12:25)、智慧(10:45)
- **无效扫码**：快乐(9:30早到)、自由(13:00迟到)
- **未扫码**：勇敢(未扫码)
- **请假**：开心、青春(有已批准请假申请)

##### 请假申请
为所有考勤事件创建请假申请示例：
- 每个事件前2个学生申请请假
- 过去事件的请假申请状态为"已批准"
- 未来事件的请假申请状态为"待审批"
- 请假理由包含课程信息



### 数据清理策略

`init_test_data.py` 脚本采用彻底清理策略：

1. 按依赖关系顺序删除，避免外键约束错误
2. 清除所有用户（包括超级用户），确保环境干净
3. 清除系统设置，重置所有配置项
4. 提供详细的清除进度提示

### 密码设置

- 统一密码：所有账号密码都是 `1`
- 直接设置：使用 `create_user()` 直接设置，避免哈希处理
- 开发友好：简化测试流程



 